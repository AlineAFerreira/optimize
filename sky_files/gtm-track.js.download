define("gtmTrack",["main","jquery","jquery.cookie","authentication"],function(){var i={SESSION_KEY_USERDATA_ASSISELECT:"P_uDSelectAssi",SESSION_KEY_USERDATA_UPLAN:"P_uplan",SESSION_KEY_USERDATA_UPLANID:"P_uplanId",SESSION_KEY_USERDATA_TIPO:"P_uDtipo"};function a(){this.pageView=function(a,o,e,t,s,r){e=e||$("meta[name=hashpage]").attr("content");var n,l={},d={},p={},c={},u={},f={};for(n in dataLayer.push({parametros:void 0,ecommerce:void 0}),l.event="pagina",d.hash=e,d.idcms=(location.pathname.replace("/web/sky","")+(t||"")).replace("//","/"),""!=d.idcms&&"/"!=d.idcms||(d.idcms="/home"),a)d[n]=a[n];if(l.parametros=d,o){if(c.currencyCode="BRL",!s||"impressao"!=s&&"impressions"!=s?!s||"impressaoPromo"!=s&&"promoView"!=s?s&&"click"==s?c.click={products:[]}:!s||"clickPromo"!=s&&"promoClick"!=s?!s||"detalhe"!=s&&"detail"!=s?!s||"adicionar"!=s&&"add"!=s?!s||"remover"!=s&&"remove"!=s?!s||"comprar"!=s&&"checkout"!=s?!s||"finalizar"!=s&&"purchase"!=s?c.add={products:[]}:(c.purchase={products:[]},c.purchase.actionField={id:o.transaction_id?o.transaction_id:btoa(o.id+(new Date).getTime()+Math.random()),affiliation:o.affiliation?o.affiliation:"lojapre",revenue:Number(o.revenue),tax:"0",shipping:"0",coupon:"",list:o.list},o.option&&(c.purchase.actionField.option=o.option,delete o.option),o.transaction_id&&delete o.transaction_id,delete o.list,delete c.currencyCode,delete o.affiliation,delete o.revenue):(c.checkout={products:[]},delete c.currencyCode):c.removes={products:[]}:c.add={products:[]}:c.detail={products:[]}:c.promoClick={promotions:[]}:c.promoView={promotions:[]}:c.impressions=[],Array.isArray(o))for(var m=0;m<o.length;m++){for(n in u={},o[m])u[n]=o[m][n];if(!s||"impressao"!=s&&"impressions"!=s)if(!s||"impressaoPromo"!=s&&"promoView"!=s)if(s&&"click"==s){var v=u.list,_=u.affiliation;delete u.list,delete u.affiliation,c.click.actionField={list:v,affiliation:_},c.click.products.push(u)}else if(!s||"clickPromo"!=s&&"promoClick"!=s)if(!s||"detalhe"!=s&&"detail"!=s)!s||"adicionar"!=s&&"add"!=s?!s||"remover"!=s&&"remove"!=s?!s||"comprar"!=s&&"checkout"!=s?!s||"finalizar"!=s&&"purchase"!=s?(u.list&&(c.add.actionField={list:u.list?u.list:"-"},delete u.list),u.affiliation&&(c.add.actionField.affiliation=u.affiliation,delete u.affiliation),u.option&&(c.add.actionField.option=u.option,delete u.option),c.add.products.push(u)):(delete u.index,u.option&&u.revenue&&u.affiliation&&(c.purchase.actionField={id:o.transaction_id?o.transaction_id:btoa(u.id),affiliation:u.affiliation?u.affiliation:"lojapre",revenue:Number(u.revenue),option:u.option,tax:"0",shipping:"0",coupon:"",list:u.list},o.transaction_id&&delete o.transaction_id,delete u.list,delete u.revenue,delete u.option,delete u.affiliation),c.purchase.products.push(u)):(delete u.index,c.checkout.actionField={step:u.step,list:u.list},u.option&&(c.checkout.actionField.option=u.option,delete u.option),u.affiliation&&(c.checkout.actionField.affiliation=u.affiliation,delete u.affiliation),delete u.list,delete u.step,c.checkout.products.push(u)):(c.remove.actionField={list:u.list?u.list:"-"},delete u.list,u.affiliation&&(c.remove.actionField.affiliation=u.affiliation,delete u.affiliation),u.option&&(c.remove.actionField.option=u.option,delete u.option),c.remove.products.push(u)):(c.add.actionField={list:u.list?u.list:"-"},delete u.list,u.affiliation&&(c.add.actionField.affiliation=u.affiliation,delete u.affiliation),u.option&&(c.add.actionField.option=u.option,delete u.option),c.add.products.push(u));else{var h=u.list,g=u.affiliation;delete u.list,delete u.affiliation,c.detail.actionField={list:h,affiliation:g},c.detail.products.push(u)}else c.promoClick.promotions.push(u);else c.promoView.promotions.push(u);else c.impressions.push(u)}else{for(n in o)u[n]=o[n];if(!s||"impressao"!=s&&"impressions"!=s)if(!s||"impressaoPromo"!=s&&"promoView"!=s)if(s&&"click"==s){var S=u.list,k=u.affiliation;delete u.list,delete u.affiliation,c.click.actionField={list:S,affiliation:k},c.click.products.push(u)}else if(!s||"clickPromo"!=s&&"promoClick"!=s)if(!s||"detalhe"!=s&&"detail"!=s)!s||"adicionar"!=s&&"add"!=s?!s||"remover"!=s&&"remove"!=s?!s||"comprar"!=s&&"checkout"!=s?!s||"finalizar"!=s&&"purchase"!=s?(u.list&&(c.add.actionField={list:u.list?u.list:"-"},delete u.list),u.affiliation&&(c.add.actionField.affiliation=u.affiliation,delete u.affiliation),u.option&&(c.add.actionField.option=u.option,delete u.option),c.add.products.push(u)):(delete u.index,delete u.list,c.purchase.products.push(u)):(delete u.index,c.checkout.actionField={step:u.step,list:u.list},delete u.list,delete u.step,u.option&&(c.checkout.actionField.option=u.option,delete u.option),u.affiliation&&(c.checkout.actionField.affiliation=u.affiliation,delete u.affiliation),c.checkout.products.push(u)):(c.remove.actionField={list:u.list?u.list:"-"},delete u.list,u.affiliation&&(c.remove.actionField.affiliation=u.affiliation,delete u.affiliation),u.option&&(c.remove.actionField.option=u.option,delete u.option),c.remove.products.push(u)):(c.add.actionField={list:u.list?u.list:"-"},delete u.list,u.affiliation&&(c.add.actionField.affiliation=u.affiliation,delete u.affiliation),u.option&&(c.add.actionField.option=u.option,delete u.option),c.add.products.push(u));else{var F=u.list,A=u.affiliation;delete u.list,delete u.affiliation,c.detail.actionField={list:F,affiliation:A},c.detail.products.push(u)}else c.promoClick.promotions.push(u);else c.promoView.promotions.push(u);else c.impressions.push(u)}l.ecommerce=c}if(r)if(c.promoView={promotions:[]},Array.isArray(r))for(var E=0;E<r.length;E++){for(n in f={},o[E])f[n]=r[E][n];c.promoView.promotions.push(f)}else{for(n in r)f[n]=r[n];c.promoView.promotions.push(f)}if(p.v_tipo_assinatura="nao-logado",p.v_plano=void 0,p.v_plano_id=void 0,p.v_assinatura=void 0,p.v_opcionais=void 0,l.usuarios=p,l.parametros.v_status_assinatura="nao-logado",acc.authentication.isAuthenticated()){acc.authentication.hasInfoSession(function(){var d=JSON.parse(sessionStorage.getItem("gtm-user"));if(null!=d){if(p.v_tipo_assinatura=d.tipoAssinatura,p.v_plano=d.plano,p.v_plano_id=d.planoId,p.v_assinatura=d.assinatura,p.v_opcionais=d.opcionais,l.parametros.usuario){for(n in l.parametros.usuario)p[n]=l.parametros.usuario[n];delete l.parametros.usuario}l.usuarios=p,l.parametros.v_status_assinatura=d.statusAssinatura?d.statusAssinatura:"",w(l)}else!function(a,o,e,t,s,r){var d=sessionStorage.getItem(i.SESSION_KEY_USERDATA_ASSISELECT),p=acc.authentication.getSessionsRecharges();function c(i){var a=i?i[0]:null,o=a?a.recharges:void 0,e="";if(o)for(var t=0;t<o.length;t++){var s=o[t];"a la carte"==s.rechargeSubcategory.toLowerCase()&&(e+=""!=e?"|":"",e+=s.productId)}f(e)}function u(i){console.log("Error on logged pageview"),f("erro-na-leitura-dos-opcionais")}function f(i){for(var p,c,u,f,m,v,_,h={},g=JSON.parse(localStorage.getItem("SESSION_KEY_USERDATA_ASSI")),S=0;S<g.length;S++){var k=g[S];d==k.id&&(u=k.tipo,f=k.planoCliente,m=k.idPlanoCliente,v=k.statusAssinatura,_=k.PassoRegua)}if(0==u||1==u?p="pos":2==u?p="pre-livre":3==u?p="pre":4==u&&(p="bl"),c=2==_?"passo-regua2":0==v?"inativo":1==v?"ativo":3==v?"nao-habilitado":"cancelado",h.assinatura=d,h.tipoAssinatura=p,h.statusAssinatura=c,h.plano=f,h.planoId=m,h.opcionais=i,l.parametros.usuario){for(n in l.parametros.usuario)h[n]=l.parametros.usuario[n];delete l.parametros.usuario}sessionStorage.setItem("gtm-user",JSON.stringify(h)),acc.gtmTrack.pageView(a,o,e,t,s,r)}""!=p?p.signatureId!=d?acc.authentication.setSessionRecharges().then(function(){c(p=acc.authentication.getSessionsRecharges())}).catch(function(){u("Erro leitura recharges")}):c(p):u("Erro leitura recharges")}(a,o,e,t,s,r)})}else{var I=JSON.parse(sessionStorage.getItem("gtm-user-deslog"));I?(p.v_tipo_assinatura=I.v_tipo_assinatura?I.v_tipo_assinatura:"nao-logado",p.v_plano=I.v_plano?I.v_plano:void 0,p.v_plano_id=I.v_plano_id?I.v_plano_id:void 0,p.v_assinatura=I.v_assinatura?I.v_assinatura:void 0,p.v_opcionais=void 0,I.v_perfil_id&&(p.v_perfil_id=I.v_perfil_id),l.usuarios=p,l.parametros.usuario&&delete l.parametros.usuario,w(l)):l.parametros.usuario?(p.v_tipo_assinatura=l.parametros.usuario.v_tipo_assinatura?l.parametros.usuario.v_tipo_assinatura:"nao-logado",p.v_plano=l.parametros.usuario.v_plano?l.parametros.usuario.v_plano:void 0,p.v_plano_id=l.parametros.usuario.v_plano_id?l.parametros.usuario.v_plano_id:void 0,p.v_assinatura=l.parametros.usuario.v_assinatura?l.parametros.usuario.v_assinatura:void 0,p.v_opcionais=void 0,l.parametros.usuario.v_perfil_id&&(p.v_perfil_id=l.parametros.usuario.v_perfil_id),delete l.parametros.usuario,sessionStorage.setItem("gtm-user-deslog",JSON.stringify(p)),acc.gtmTrack.pageView(a,o,e,t,s,r)):w(l)}function w(i){-1==location.origin.indexOf("www.sky.com.br")&&(console.log(i),console.log(JSON.stringify(i))),dataLayer.push(i)}},this.trackEvent=function(a,o,e){var t,s={},r={},n={},l={};for(t in dataLayer.push({parametros:void 0,ecommerce:void 0}),s.event="interacao",a)r[t]=a[t];if(s.parametros=r,o){if(n.currencyCode="BRL",!e||"impressao"!=e&&"impressions"!=e?!e||"impressaoPromo"!=e&&"promoView"!=e?e&&"click"==e?n.click={products:[]}:!e||"clickPromo"!=e&&"promoClick"!=e?!e||"detalhe"!=e&&"detail"!=e?!e||"adicionar"!=e&&"add"!=e?!e||"remover"!=e&&"remove"!=e?!e||"comprar"!=e&&"checkout"!=e?!e||"finalizar"!=e&&"purchase"!=e?n.add={products:[]}:(n.purchase={products:[]},n.purchase.actionField={id:o.transaction_id?o.transaction_id:btoa(o.id),affiliation:o.affiliation?o.affiliation:"lojapre",revenue:Number(o.revenue),tax:"0",shipping:"0",coupon:"",list:o.list},o.transaction_id&&delete o.transaction_id,delete o.list,delete n.currencyCode,delete o.revenue):(n.checkout={products:[]},delete n.currencyCode):n.remove={products:[]}:n.add={products:[]}:n.detail={products:[]}:n.promoClick={promotions:[]}:n.promoView={promotions:[]}:n.impressions=[],Array.isArray(o))for(var d=0;d<o.length;d++){for(t in l={},o[d])l[t]=o[d][t];if(!e||"impressao"!=e&&"impressions"!=e)if(!e||"impressaoPromo"!=e&&"promoView"!=e)if(e&&"click"==e){var p=l.list,c=l.affiliation;delete l.list,delete l.affiliation,n.click.actionField={list:p,affiliation:c},n.click.products.push(l)}else if(!e||"clickPromo"!=e&&"promoClick"!=e)if(!e||"detalhe"!=e&&"detail"!=e)!e||"adicionar"!=e&&"add"!=e?!e||"remover"!=e&&"remove"!=e?!e||"comprar"!=e&&"checkout"!=e?!e||"finalizar"!=e&&"purchase"!=e?(l.list&&(n.add.actionField={list:l.list?l.list:"-"},delete l.list),l.affiliation&&(n.add.actionField.affiliation=l.affiliation,delete l.affiliation),l.option&&(n.add.actionField.option=l.option,delete l.option),n.add.products.push(l)):(delete l.index,delete l.list,n.purchase.products.push(l)):(delete l.index,n.checkout.actionField={step:l.step,list:l.list},l.affiliation&&(n.checkout.actionField.affiliation=l.affiliation,delete l.affiliation),delete l.list,delete l.step,n.checkout.products.push(l)):(n.remove.actionField={list:l.list?l.list:"-"},delete l.list,l.affiliation&&(n.remove.actionField.affiliation=l.affiliation,delete l.affiliation),l.option&&(n.remove.actionField.option=l.option,delete l.option),n.remove.products.push(l)):(n.add.actionField={list:l.list?l.list:"-"},delete l.list,l.affiliation&&(n.add.actionField.affiliation=l.affiliation,delete l.affiliation),l.option&&(n.add.actionField.option=l.option,delete l.option),n.add.products.push(l));else{var u=l.list,f=l.affiliation;delete l.list,delete l.affiliation,n.detail.actionField={list:u,affiliation:f},n.detail.products.push(l)}else n.promoClick.promotions.push(l);else n.promoView.promotions.push(l);else n.impressions.push(l)}else{for(t in o)l[t]=o[t];if(!e||"impressao"!=e&&"impressions"!=e)if(!e||"impressaoPromo"!=e&&"promoView"!=e)if(e&&"click"==e){var m=l.list,v=l.affiliation;delete l.list,delete l.affiliation,n.click.actionField={list:m,affiliation:v},n.click.products.push(l)}else if(!e||"clickPromo"!=e&&"promoClick"!=e)if(!e||"detalhe"!=e&&"detail"!=e)!e||"adicionar"!=e&&"add"!=e?!e||"remover"!=e&&"remove"!=e?!e||"comprar"!=e&&"checkout"!=e?!e||"finalizar"!=e&&"purchase"!=e?(l.list&&(n.add.actionField={list:l.list?l.list:"-"},delete l.list),l.affiliation&&(n.add.actionField.affiliation=l.affiliation,delete l.affiliation),l.option&&(n.add.actionField.option=l.option,delete l.option),n.add.products.push(l)):(delete l.index,delete l.list,n.purchase.products.push(l)):(delete l.index,n.checkout.actionField={step:l.step,list:l.list},delete l.list,delete l.step,l.affiliation&&(n.checkout.actionField.affiliation=l.affiliation,delete l.affiliation),n.checkout.products.push(l)):(n.remove.actionField={list:l.list?l.list:"-"},delete l.list,l.affiliation&&(n.remove.actionField.affiliation=l.affiliation,delete l.affiliation),l.option&&(n.remove.actionField.option=l.option,delete l.option),n.remove.products.push(l)):(n.add.actionField={list:l.list?l.list:"-"},delete l.list,l.affiliation&&(n.add.actionField.affiliation=l.affiliation,delete l.affiliation),l.option&&(n.add.actionField.option=l.option,delete l.option),n.add.products.push(l));else{var _=l.list,h=l.affiliation;delete l.list,delete l.affiliation,n.detail.actionField={list:_,affiliation:h},n.detail.products.push(l)}else n.promoClick.promotions.push(l);else n.promoView.promotions.push(l);else n.impressions.push(l)}s.ecommerce=n}var g={v_tipo_assinatura:"nao-logado",v_plano:void 0,v_plano_id:void 0,v_assinatura:void 0,v_opcionais:void 0};if(acc.authentication.isAuthenticated()){var S=JSON.parse(sessionStorage.getItem("gtm-user"));if(S){if(s.parametros.v_status_assinatura=S.statusAssinatura,g.v_tipo_assinatura=S.tipoAssinatura,g.v_plano=S.plano,g.v_plano_id=S.planoId,g.v_assinatura=S.assinatura,g.v_opcionais=S.opcionais,s.parametros.usuario){for(t in s.parametros.usuario)g[t]=s.parametros.usuario[t];delete s.parametros.usuario}s.usuarios=g}else{var k=function(i){var a=i&&i[0]?i[0]:null,o=a?a.recharges:null,e="";if(o)for(var t=0;t<o.length;t++){var s=o[t];"a la carte"==s.rechargeSubcategory.toLowerCase()&&(e+=""!=e?"|":"",e+=s.productId)}A(e)},F=function(i){console.log("Error on logged trackEvent");A("erro-na-leitura-dos-opcionais")},A=function(i){for(var r,n,l,d,p,c,u,f={},m=JSON.parse(localStorage.getItem("SESSION_KEY_USERDATA_ASSI")),v=0;v<m.length;v++){var _=m[v];E==_.id&&(l=_.tipo,d=_.planoCliente,p=_.idPlanoCliente,c=_.statusAssinatura,u=_.PassoRegua)}if(0==l||1==l?r="pos":2==l?r="pre-livre":3==l?r="pre":4==l&&(r="bl"),n=2==u?"passo-regua2":0==c?"inativo":1==c?"ativo":3==c?"nao-habilitado":"cancelado",f.assinatura=E,f.statusAssinatura=n,f.tipoAssinatura=r,f.plano=d,f.planoId=p,f.opcionais=i,s.parametros.usuario){for(t in s.parametros.usuario)f[t]=s.parametros.usuario[t];delete s.parametros.usuario}sessionStorage.setItem("gtm-user",JSON.stringify(f)),acc.gtmTrack.trackEvent(a,o,e)},E=sessionStorage.getItem(i.SESSION_KEY_USERDATA_ASSISELECT),I=acc.authentication.getSessionsRecharges();""!=I?I.signatureId!=E?acc.authentication.setSessionRecharges().then(function(){I=acc.authentication.getSessionsRecharges(),k(I)}).catch(function(){F()}):k(I):F()}}else{var w=JSON.parse(sessionStorage.getItem("gtm-user-deslog"));w?(g.v_tipo_assinatura=w.v_tipo_assinatura?w.v_tipo_assinatura:"nao-logado",g.v_plano=w.v_plano?w.v_plano:void 0,g.v_plano_id=w.v_plano_id?w.v_plano_id:void 0,g.v_assinatura=w.v_assinatura?w.v_assinatura:void 0,g.v_opcionais=void 0,w.v_perfil_id&&(g.v_perfil_id=w.v_perfil_id),s.usuarios=g,s.parametros.usuario&&delete s.parametros.usuario):s.parametros.usuario?(g.v_tipo_assinatura=s.parametros.usuario.v_tipo_assinatura?s.parametros.usuario.v_tipo_assinatura:"nao-logado",g.v_plano=s.parametros.usuario.v_plano?s.parametros.usuario.v_plano:void 0,g.v_plano_id=s.parametros.usuario.v_plano_id?s.parametros.usuario.v_plano_id:void 0,g.v_assinatura=s.parametros.usuario.v_assinatura?s.parametros.usuario.v_assinatura:void 0,g.v_opcionais=void 0,s.parametros.usuario.v_perfil_id&&(g.v_perfil_id=s.parametros.usuario.v_perfil_id),delete s.parametros.usuario,sessionStorage.setItem("gtm-user-deslog",JSON.stringify(g)),acc.gtmTrack.trackEvent(a,o,e)):(s.parametros.v_status_assinatura="nao-logado",s.usuarios=g)}-1==location.origin.indexOf("www.sky.com.br")&&(console.log(s),console.log(JSON.stringify(s))),s.parametros.usuario&&delete s.parametros.usuario,dataLayer.push(s)}}a.prototype.pageView=null,a.prototype.trackEvent=null,acc.gtmTrack=new a});